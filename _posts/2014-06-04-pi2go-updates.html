---
layout: post
title: pi2go Updates
date: '2014-06-04T18:36:00.000-07:00'
author: Daryl Bennett
tags:
- pi2go
- RPi
- Ubuntu
- Python
- QT
modified_time: '2014-06-04T18:39:49.241-07:00'
thumbnail: http://2.bp.blogspot.com/-bsNr6f5D3PI/U4_EyozJ84I/AAAAAAAAJ_E/BPkIfzOeh_w/s72-c/obd.png
blogger_id: tag:blogger.com,1999:blog-7621217468312732627.post-1330610511454314789
blogger_orig_url: http://kd8bny.blogspot.com/2014/06/pi2go-updates.html
---

So it really has been awhile since I last posted, this has seriously been a busy year. However I feel like starting strong again and posting a few new features I put in pi2go. I am really liking how the project is turning out. New features keep coming to me and I lack the time to program them. If your're unfamiliar with the project check this out:&nbsp;<a href="http://kd8bny.blogspot.com/2013/06/pi2go-is-working-100.html">http://kd8bny.blogspot.com/2013/06/pi2go-is-working-100.html</a><br /><div><br /></div><div>Anyway here is what's new:</div><h3>OBDII Rewritten!</h3><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-bsNr6f5D3PI/U4_EyozJ84I/AAAAAAAAJ_E/BPkIfzOeh_w/s1600/obd.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-bsNr6f5D3PI/U4_EyozJ84I/AAAAAAAAJ_E/BPkIfzOeh_w/s1600/obd.png" height="219" width="320" /></a></div><div><br /></div><div>If you were wondering "didn't he rewrite this already?" You would be correct, however a good friend of mine (<a href="https://github.com/c0nrad" target="_blank">c0nrad</a>) pointed out a better way to write this code. A little background knowledge of QT points that it is a system based on events. In laymans terms:</div><h3>&nbsp; &nbsp; &nbsp;Event1 happens -&gt; Event2 happens -&gt; QT process events -&gt; Event3 happens</h3><div>Only Event1 and Event2 are processed. Event3 doesn't process until QT once again processes its events. This enacted by a process of signals and slots within QT.</div><div>So how does the code work?</div><div><br /></div><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">&nbsp; &nbsp; def ODBII(self):</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">&nbsp; &nbsp; &nbsp; &nbsp; """Starts to read the ODB data"""</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">&nbsp; &nbsp; &nbsp; &nbsp; self.stopOBD = not self.stopOBD</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">&nbsp; &nbsp; &nbsp; &nbsp; while not self.stopOBD:</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.ui.obdButton.setText("Stop")</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; OBDvalues = pi2OBD.pi2OBD().OBDread()&nbsp;</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.OBDsignal.emit(OBDvalues)</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PyQt4.QtCore.QCoreApplication.processEvents()</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">&nbsp; &nbsp; &nbsp; &nbsp; self.ui.obdButton.setText("Start")</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">&nbsp; &nbsp; &nbsp; &nbsp; self.OBDsignal.emit(OBDvalues)</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;"><br /></span><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">&nbsp; &nbsp; &nbsp; &nbsp; return</span><br /><span style="font-family: inherit;">The first important line is the use of emit(). Emit does exactly what you would think, it sends the signal "OBDsignal" with the values of OBDvalues. The&nbsp;</span>signal<span style="font-family: inherit;">&nbsp;is&nbsp;</span>classified<span style="font-family: inherit;">&nbsp;in&nbsp;</span>earlier<span style="font-family: inherit;">&nbsp;within the class</span><br /><span style="font-family: inherit;"><br /></span><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">OBDsignal = QtCore.pyqtSignal([list], name='OBDsignal')</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;"><br /></span><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">self.OBDsignal.connect(self.updateGUI)</span><br /><span style="font-family: inherit;"><br /></span><span style="font-family: inherit;">The connect&nbsp;</span>statement<span style="font-family: inherit;">&nbsp;is extremely important in this case. It tells QT if the signal "OBDsignal" is emitted it will run the function "updateGUI." This function does exactly that and updates the LCD values on the GUI.</span><br /><span style="font-family: inherit;"><br /></span>Back to the original code snippet. After the signal is emitted the function "updateGUI" runs. Then QT processes the events in the very next line. The main downfall with forcing QT to process events is that the UI doesn't respond on user response but rather when the program processes manually.<br /><br />So I lured you here with promises of new features......well here is the main new one:<br /><br /><h3>Maintenance Logs!</h3><div>Now I'm really happy with this feature, I think it will be incredibly useful to every user. The idea is you have the ability to log all your standard maintenance tasks into one single log. This way you will never forget when you last did an oil change.&nbsp;</div><div><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-xvB-rkEiPz8/U4_FuKLpwNI/AAAAAAAAJ_Q/MTcy2VTZsBU/s1600/care.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-xvB-rkEiPz8/U4_FuKLpwNI/AAAAAAAAJ_Q/MTcy2VTZsBU/s1600/care.png" height="225" width="320" /></a></div><div><br /></div><div>This feature also directly writes to an excel file to be read at any time. Ideas to come include pulling the last update directly to the GUI and the ability to search for specific tasks within the log.</div><div><br /></div><div>Also! I think I forgot to mention that I finally added the clock thanks to the QWT library in python. I will write on that once I use it a little more.</div><div><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-kIN2JMXSZV0/U4_GXK8n--I/AAAAAAAAJ_Y/kYC8HEwECFU/s1600/clock.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-kIN2JMXSZV0/U4_GXK8n--I/AAAAAAAAJ_Y/kYC8HEwECFU/s1600/clock.png" height="225" width="320" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">Well I think thats all the updates for this session. Too many projects but I would like to keep this one going.&nbsp;</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">If you would like to follow, please do:&nbsp;<a href="https://github.com/kd8bny/pi2go">https://github.com/kd8bny/pi2go</a></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">As always</div><div class="separator" style="clear: both; text-align: left;"><span style="background-color: white; color: #333333; font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 19.600000381469727px; text-align: justify;">**For those that care written in Python2.7 utilizing pyQt4 over pySerial.&nbsp;</span><a href="https://github.com/kd8bny/pi2go/issues" style="-webkit-transition: color 0.3s; background-color: white; color: #009eb8; display: inline; font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 19.600000381469727px; outline: none; text-align: justify; text-decoration: none; transition: color 0.3s;" target="_blank">Issue tracker</a></div><div><br /></div>