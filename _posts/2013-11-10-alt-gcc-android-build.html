---
layout: post
title: Alt GCC android build
date: '2013-11-10T19:33:00.001-08:00'
author: Daryl Bennett
tags:
- linux
- kernel
- SABERMOD
- Android
- PAC
- Linaro
modified_time: '2013-11-10T19:34:15.438-08:00'
blogger_id: tag:blogger.com,1999:blog-7621217468312732627.post-2511548278811798290
blogger_orig_url: http://kd8bny.blogspot.com/2013/11/alt-gcc-android-build.html
---

Have you ever had the thought of "Hey GCC has some room for improvement in <span style="font-family: inherit;">my android kernel build?" Well of course you did, even if you didnt know it. One of the most well known GCC tool chains is Linaro. This tool chain includes many optimizations over GCC. Needless to say I wont bother you with too many details. Lets just say that a built kernel with an alt GCC tool chain gives android many performance improvements.</span><br /><br />Now to the fun part. How does one do such a thing? For my builds I use the SABERMOD toolchain. It includes much of Linaro with a few more optimizations. Linky's below:<br /><br /><a href="http://releases.linaro.org/13.09/components/android/toolchain/4.8" target="_blank">Linaro 4.8</a> and <a href="https://github.com/SaberMod/android_prebuilts_gcc_linux-x86_arm_sabermod-arm-linux-androideabi-4.9" target="_blank">SABERMOD 4.9</a><br /><br />Now within your ROM's working directory<br /><br /><span style="font-family: &quot;Courier New&quot;, Courier, monospace;"><span style="font-size: x-small;">$ cd</span></span><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;, Courier, monospace;"> </span></span><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;, Courier, monospace;">&lt;working dir&gt;/prebuilts</span><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">/gcc/linux-x86/arm</span></span><br /><br />Unpack whichever tool chain you would like to use.<br /><br />Next! <br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;"><br /></span></span><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">$ sudo gedit build/envsetup.sh</span></span><br /><span style="font-family: inherit;"><span style="font-size: small;">&nbsp;</span></span><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;"><span style="font-family: Arial,Helvetica,sans-serif;"><span style="font-size: small;">&nbsp;</span></span></span></span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;"><span style="font-size: small;"><span style="font-family: Georgia, &quot;Times New Roman&quot;, serif;">Look for the following line (line 155)</span></span></span></span><br /><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;"><br /></span></span><br /><div class="line" id="LC149"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">&nbsp;<span class="c"># The gcc toolchain does not exists for windows/cygwin. In this case, do not reference it.</span></span></span></div><div class="line" id="LC150"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">export </span><span class="nv">ANDROID_EABI_TOOLCHAIN</span><span class="o">=</span></span></span></div><div class="line" id="LC151"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">local </span><span class="nv">ARCH</span><span class="o">=</span><span class="k">$(</span>get_build_var TARGET_ARCH<span class="k">)</span></span></span></div><div class="line" id="LC152"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">case</span> <span class="nv">$ARCH</span> in</span></span></div><div class="line" id="LC153"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x86<span class="o">)</span> <span class="nv">toolchaindir</span><span class="o">=</span>x86/i686-linux-android-<span class="nv">$targetgccversion</span><span class="o">/</span>bin</span></span></div><div class="line" id="LC154"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;;</span></span></div><div class="line" id="LC155"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>arm<span class="o">)</span> <span class="nv">toolchaindir</span><span class="o">=</span>arm/arm-linux-androideabi-<span class="nv">$targetgccversion</span><span class="o">/</span>bin</b></span></span></div><div class="line" id="LC156"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;;</span></span></div><div class="line" id="LC157"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mips<span class="o">)</span> <span class="nv">toolchaindir</span><span class="o">=</span>mips/mipsel-linux-android-<span class="nv">$targetgccversion</span><span class="o">/</span>bin</span></span></div><div class="line" id="LC158"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;;</span></span></div><div class="line" id="LC159"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">*)</span></span></span></div><div class="line" id="LC160"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">"Can't find toolchain for unknown architecture: $ARCH"</span></span></span></div><div class="line" id="LC161"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">toolchaindir</span><span class="o">=</span>xxxxxxxxx</span></span></div><div class="line" id="LC162"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;;</span></span></div><div class="line" id="LC163"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">esac</span></span></span></div><div class="line" id="LC163"></div><div class="line" id="LC163"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;"><span class="k"><span style="font-size: small;"><span style="font-family: Georgia, &quot;Times New Roman&quot;, serif;">This is the directory to your tool chain change it to your new tool chain location. For example my line 155 reads</span></span></span></span></span></div><div class="line" id="LC163"></div><div class="line" id="LC163"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;"><span class="k"><span style="font-size: small;"><span style="font-family: Georgia, &quot;Times New Roman&quot;, serif;">&nbsp;</span></span></span></span></span><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;">arm<span class="o">)</span> <span class="nv">toolchaindir</span><span class="o">=</span>arm/<b>sabermod-4.9<span class="nv"></span></b><span class="o">/</span>bin</span></span></div><div class="line" id="LC163"></div><div class="line" id="LC163"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;"><span class="k"><span style="font-size: small;"><span style="font-family: Georgia, &quot;Times New Roman&quot;, serif;">because that is the name of my directory in "prebuilts/" .</span></span></span></span></span></div><div class="line" id="LC163"></div><div class="line" id="LC163"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;"><span class="k"><span style="font-size: small;"><span style="font-family: Georgia, &quot;Times New Roman&quot;, serif;">After making those changes you you are ready to build the android. Continue with lunch or a build script if provided.</span></span></span></span></span></div><div class="line" id="LC163"></div><div class="line" id="LC163"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;"><span class="k"><span style="font-size: small;"><span style="font-family: Georgia, &quot;Times New Roman&quot;, serif;">Good Luck!!</span></span></span></span></span></div><div class="line" id="LC163"></div><div class="line" id="LC163"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;"><span class="k"><span style="font-size: small;"><span style="font-family: Georgia, &quot;Times New Roman&quot;, serif;">**As always </span></span></span></span></span>for those who care<br />&nbsp;&nbsp; Ubuntu 13.10, PAC-rom 4.3, SABERMOD4.9 </div><div class="line" id="LC163"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: x-small;"><span class="k"><span style="font-size: small;"><span style="font-family: Georgia, &quot;Times New Roman&quot;, serif;">&nbsp;</span></span> </span></span></span></div>